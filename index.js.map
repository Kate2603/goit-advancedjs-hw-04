{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '33957392-15c8dcee5be6fcb8a0c7e759b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page: page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n};\n","export const renderImages = images => {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      image => `\n        <div class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n            </div>\n        </div>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport const clearGallery = () => {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n};\n\nexport const showLoadMoreButton = () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.style.display = 'block';\n};\n\nexport const hideLoadMoreButton = () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.style.display = 'none';\n};\n\nexport const showEndMessage = () => {\n  const message = document.createElement('p');\n  message.textContent =\n    \"We're sorry, but you've reached the end of search results.\";\n  message.classList.add('end-message');\n  document.querySelector('.gallery').insertAdjacentElement('afterend', message);\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showEndMessage,\n} from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './css/styles.css';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst form = document.querySelector('.search-form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = event.target.elements.query.value.trim();\n  currentPage = 1;\n\n  clearGallery();\n  hideLoadMoreButton();\n\n  if (currentQuery) {\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      renderImages(data.hits);\n      if (data.totalHits > 15) {\n        showLoadMoreButton();\n      }\n      const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      lightbox.refresh();\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    renderImages(data.hits);\n\n    // Page scrolling\n    const cardHeight = document\n      .querySelector('.photo-card')\n      .getBoundingClientRect().height; // We get the height of the card\n    window.scrollBy({\n      top: cardHeight * 2, // Scroll to two card heights\n      behavior: 'smooth', // Smooth scrolling\n    });\n\n    if (data.hits.length < 15 || currentPage * 15 >= data.totalHits) {\n      hideLoadMoreButton();\n      showEndMessage();\n    }\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n  } catch (error) {\n    console.error('Error:', error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","renderImages","images","gallery","markup","image","clearGallery","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","showEndMessage","message","currentPage","currentQuery","form","event","data","SimpleLightbox","cardHeight"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAO,IAAM,CACpD,GAAI,CAWF,OAViB,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,YACd,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,ECtBaC,EAAeC,GAAU,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACCG,GAAS;AAAA;AAAA,uBAEQA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,oDAGdA,EAAM,KAAK;AAAA,oDACXA,EAAM,KAAK;AAAA,uDACRA,EAAM,QAAQ;AAAA,wDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIlE,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,EAEaE,EAAe,IAAM,CAChC,MAAMH,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,EAEaI,EAAqB,IAAM,CACtC,MAAMC,EAAiB,SAAS,cAAc,YAAY,EAC1DA,EAAe,MAAM,QAAU,OACjC,EAEaC,EAAqB,IAAM,CACtC,MAAMD,EAAiB,SAAS,cAAc,YAAY,EAC1DA,EAAe,MAAM,QAAU,MACjC,EAEaE,EAAiB,IAAM,CAClC,MAAMC,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YACN,6DACFA,EAAQ,UAAU,IAAI,aAAa,EACnC,SAAS,cAAc,UAAU,EAAE,sBAAsB,WAAYA,CAAO,CAC9E,EC/BA,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CN,EAAiB,SAAS,cAAc,YAAY,EAE1DM,EAAK,iBAAiB,SAAU,MAAMC,GAAS,CAQ7C,GAPAA,EAAM,eAAc,EACpBF,EAAeE,EAAM,OAAO,SAAS,MAAM,MAAM,OACjDH,EAAc,EAEdN,IACAG,IAEII,EACF,GAAI,CACF,MAAMG,EAAO,MAAMpB,EAAYiB,EAAcD,CAAW,EACxDX,EAAae,EAAK,IAAI,EAClBA,EAAK,UAAY,IACnBT,IAEe,IAAIU,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GACtB,CAAO,EACQ,QAAO,CACjB,OAAQjB,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,CAC9B,CAEL,CAAC,EAEDQ,EAAe,iBAAiB,QAAS,SAAY,CACnDI,GAAe,EAEf,GAAI,CACF,MAAMI,EAAO,MAAMpB,EAAYiB,EAAcD,CAAW,EACxDX,EAAae,EAAK,IAAI,EAGtB,MAAME,EAAa,SAChB,cAAc,aAAa,EAC3B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,GAEGF,EAAK,KAAK,OAAS,IAAMJ,EAAc,IAAMI,EAAK,aACpDP,IACAC,KAGe,IAAIO,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GACpB,CAAK,EACQ,QAAO,CACjB,OAAQjB,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,CAC9B,CACH,CAAC"}